<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>State stores &mdash; Streamiz.Kafka.Net  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=b3ba4146"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Test topology driver" href="topology-test-driver.html" />
    <link rel="prev" title="Stateful processors" href="stateful-processors.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Streamiz.Kafka.Net
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Streamiz.Kafka.Net</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="stream-configuration.html">Configuring a Stream Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="threading-model.html">Threading model</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateless-processors.html">Stateless processors</a></li>
<li class="toctree-l1"><a class="reference internal" href="stateful-processors.html">Stateful processors</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">State stores</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basics">Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#in-memory-key-value-store">In Memory key/value store</a></li>
<li class="toctree-l2"><a class="reference internal" href="#in-memory-window-store">In Memory window store</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rocksdb-key-value-store">RocksDb key/value store</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rocksdb-window-store">RocksDb window store</a></li>
<li class="toctree-l2"><a class="reference internal" href="#caching">Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-caching">Configuring Caching</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="topology-test-driver.html">Test topology driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitoring.html">Monitoring Stream Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="async-processing.html">Asynchronous processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="processor-api.html">Processor API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Streamiz.Kafka.Net</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">State stores</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/stores.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="state-stores">
<h1>State stores<a class="headerlink" href="#state-stores" title="Permalink to this heading">¶</a></h1>
<p>⚠️ <span style="color:red"><strong>Some things you need to know</strong></span> ⚠️</p>
<ul class="simple">
<li><p>From 1.4.0 release, the default state store is a RocksDb state store. (Before 1.4.0, the default state store was a in memory state store.)</p></li>
<li><p>RocksDb state store is available from 1.2.0 release.</p></li>
<li><p>By default, a state store is tracked by a changelog topic from 1.2.0 release. (If you don’t need, you have to make it explicit).</p></li>
</ul>
<section id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this heading">¶</a></h2>
<p>A stateful processor may use one or more state stores. Each task that contains a stateful processor has exclusive access to the state stores in the processor. That means a topology with two state stores and five input partitions will lead to five tasks, and each task will own two state stores resulting in 10 state stores in total for your Kafka Streams application.</p>
<p>State stores in Streamiz are layered in four ways :</p>
<ul class="simple">
<li><p>The outermost layer collects metrics about the operations on the state store and serializes and deserializes the records that are written to and read from the state store.</p></li>
<li><p>The next layer caches the records. If a record exists in the cache with the same key as a new record, the cache overwrites the existing record with the new record; otherwise, the cache adds a new entry for the new record. The cache is the primary serving area for lookups. If a lookup can’t find a record with a given key in the cache, it is forwarded to the next layer. If this lookup returns an entry, the entry is added to the cache. If the cache exceeds its configured size during a write, the cache evicts the records that have been least recently used and sends new and overwritten records downstream. The caching layer decreases downstream traffic because no updates are sent downstream unless the cache evicts records or is flushed. The cache’s size is configurable. If it is set to zero, the cache is disabled. (<code class="docutils literal notranslate"><span class="pre">EARLY</span> <span class="pre">ACCESS</span> <span class="pre">ONLY</span></code>)</p></li>
<li><p>The changelogging layer sends each record updated in the state store to a topic in Kafka—the state’s changelog topic. The changelog topic is a compacted topic that replicates the data in the local state. Changelogging is needed for fault tolerance, as we will explain below.</p></li>
<li><p>The innermost layer updates and reads the local state store.</p></li>
</ul>
<p><img alt="state-store" src="_images/state-store.png" /></p>
</section>
<section id="in-memory-key-value-store">
<h2>In Memory key/value store<a class="headerlink" href="#in-memory-key-value-store" title="Permalink to this heading">¶</a></h2>
<p>As his name, this is an inmemory key value state store which is supplied by InMemoryKeyValueBytesStoreSupplier.
You have an child materialized class to help you to use it.</p>
<p>Usefull with statefull operation like Count, Aggregate, Reduce but also to materialized IKTable&lt;K, V&gt; or IGlobalKTable&lt;K, V&gt;</p>
<p>Example :</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span><span class="p">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;test-ktable&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">InMemory</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;test-store&quot;</span><span class="p">));</span>

<span class="n">builder</span>
<span class="w">        </span><span class="p">.</span><span class="n">Stream</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;topic&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">GroupBy</span><span class="p">((</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">k</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">Aggregate</span><span class="p">(</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span>
<span class="w">            </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">agg</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="w">            </span><span class="n">InMemory</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;agg-store&quot;</span><span class="p">).</span><span class="n">WithValueSerdes</span><span class="o">&lt;</span><span class="n">Int64SerDes</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Be carefull, this state store is not persistent ! So after each application restart, you loose the state of your state store.</strong></p>
</section>
<section id="in-memory-window-store">
<h2>In Memory window store<a class="headerlink" href="#in-memory-window-store" title="Permalink to this heading">¶</a></h2>
<p>As his name, this is an inmemory windows state store which is supplied by InMemoryWindowStoreSupplier.
You have an child materialized class to help you to use it.</p>
<p>Usefull with windowing statefull operation like Count, Aggregate, Reduce in ITimeWindowedKStream&lt;K, V&gt;</p>
<p>Example :</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span>
<span class="w">        </span><span class="p">.</span><span class="n">Stream</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;topic&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">GroupByKey</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">WindowedBy</span><span class="p">(</span><span class="n">TumblingWindowOptions</span><span class="p">.</span><span class="n">Of</span><span class="p">(</span><span class="m">2000</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">Aggregate</span><span class="p">(</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
<span class="w">            </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">),</span>
<span class="w">            </span><span class="n">InMemoryWindows</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;store&quot;</span><span class="p">).</span><span class="n">WithValueSerdes</span><span class="o">&lt;</span><span class="n">Int32SerDes</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">ToStream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">To</span><span class="o">&lt;</span><span class="n">StringTimeWindowedSerDes</span><span class="p">,</span><span class="w"> </span><span class="n">Int32SerDes</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;output&quot;</span><span class="p">);</span>
</pre></div>
</div>
<p><strong>Be carefull, this state store is not persistent ! So after each application restart, you loose the state of your state store.</strong></p>
</section>
<section id="rocksdb-key-value-store">
<h2>RocksDb key/value store<a class="headerlink" href="#rocksdb-key-value-store" title="Permalink to this heading">¶</a></h2>
<p>As his name, this is a rocksdb key value state store which is supplied by RocksDbKeyValueBytesStoreSupplier.</p>
<p>The state store is persisted on disk at <code class="docutils literal notranslate"><span class="pre">{config.StateDir}/{config.ApplicationId}/{taskId}/rocksdb/{store.Name}</span></code>.</p>
<p>You have an child materialized class to help you to use it.</p>
<p>Usefull with statefull operation like Count, Aggregate, Reduce but also to materialized IKTable&lt;K, V&gt; or IGlobalKTable&lt;K, V&gt;</p>
<p>Example :</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span><span class="p">.</span><span class="n">Table</span><span class="p">(</span><span class="s">&quot;test-ktable&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">RocksDb</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;test-store&quot;</span><span class="p">));</span>

<span class="w"> </span><span class="n">builder</span>
<span class="w">    </span><span class="p">.</span><span class="n">Stream</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;topic&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">GroupBy</span><span class="p">((</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">k</span><span class="p">.</span><span class="n">ToUpper</span><span class="p">())</span>
<span class="w">    </span><span class="p">.</span><span class="n">Aggregate</span><span class="p">(</span>
<span class="w">        </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">0L</span><span class="p">,</span>
<span class="w">        </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">agg</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="w">        </span><span class="n">RocksDb</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;agg-store&quot;</span><span class="p">).</span><span class="n">WithValueSerdes</span><span class="o">&lt;</span><span class="n">Int64SerDes</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">    </span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="rocksdb-window-store">
<h2>RocksDb window store<a class="headerlink" href="#rocksdb-window-store" title="Permalink to this heading">¶</a></h2>
<p>As his name, this is a rocksdb windows state store which is supplied by RocksDbWindowBytesStoreSupplier.</p>
<p>This state store save data in 3 segments, each segment is a rocksdb properly and contains certain time range. This for optimization purposes and for retention periods (window size + grace + window-additional-retention).</p>
<p>You have an child materialized class to help you to use it.</p>
<p>Usefull with windowing statefull operation like Count, Aggregate, Reduce in ITimeWindowedKStream&lt;K, V&gt;</p>
<p>Example :</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="n">builder</span>
<span class="w">        </span><span class="p">.</span><span class="n">Stream</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;topic&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">GroupByKey</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">WindowedBy</span><span class="p">(</span><span class="n">TumblingWindowOptions</span><span class="p">.</span><span class="n">Of</span><span class="p">(</span><span class="m">2000</span><span class="p">))</span>
<span class="w">        </span><span class="p">.</span><span class="n">Aggregate</span><span class="p">(</span>
<span class="w">            </span><span class="p">()</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
<span class="w">            </span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">)</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Math</span><span class="p">.</span><span class="n">Max</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="n">agg</span><span class="p">),</span>
<span class="w">            </span><span class="n">RocksDbWindows</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;store&quot;</span><span class="p">).</span><span class="n">WithValueSerdes</span><span class="o">&lt;</span><span class="n">Int32SerDes</span><span class="o">&gt;</span><span class="p">()</span>
<span class="w">        </span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">ToStream</span><span class="p">()</span>
<span class="w">        </span><span class="p">.</span><span class="n">To</span><span class="o">&lt;</span><span class="n">StringTimeWindowedSerDes</span><span class="p">,</span><span class="w"> </span><span class="n">Int32SerDes</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;output&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="caching">
<h2>Caching<a class="headerlink" href="#caching" title="Permalink to this heading">¶</a></h2>
<p><strong>This feature is available in <code class="docutils literal notranslate"><span class="pre">EARLY</span> <span class="pre">ACCESS</span></code> only.</strong></p>
<p>Streamiz offers robust capabilities for stream processing applications, including efficient data caching mechanisms. Caching optimizes performance by minimizing redundant computations, reducing latency, and enhancing overall throughput within stream processing pipelines.</p>
<p><strong>Purpose of Caching</strong></p>
<p>Caching in Streamiz serves several key purposes:</p>
<ul class="simple">
<li><p><strong>Reduction of Redundant Computations</strong>: Stores intermediate results to avoid recomputing data unnecessarily.</p></li>
<li><p><strong>Performance Optimization</strong>: Minimizes latency by reducing the need for repeated expensive computations or data fetches.</p></li>
<li><p><strong>Fault Tolerance</strong>: Ensures resilience by maintaining readily accessible intermediate results for recovery during failures.</p></li>
</ul>
<p><strong>Types of Caching</strong></p>
<p>Streamiz supports one primary type of caching:</p>
<ol class="simple">
<li><p><strong>State Store Cache</strong>: Enhances processing efficiency by caching state store entries, reducing the overhead of state fetches and updates.</p></li>
</ol>
<section id="configuring-caching">
<h3>Configuring Caching<a class="headerlink" href="#configuring-caching" title="Permalink to this heading">¶</a></h3>
<p>To optimize caching behavior, Streamiz offers configurable parameters:</p>
<ul class="simple">
<li><p><strong>Cache Size</strong>: Defines the maximum size of the cache to balance performance and memory usage. To be fair, this cache size is the maximum cache size per state store.</p></li>
<li><p><strong>Enable caching</strong> : By default, caching is disabled for all stateful processors in Streamiz. <strong>This feature will be enabled by default soon.</strong> You can enable the caching feature with <code class="docutils literal notranslate"><span class="pre">InMemory.WithCachingEnabled()</span></code>, <code class="docutils literal notranslate"><span class="pre">InMemoryWindows.WithCachingEnabled()</span></code>, <code class="docutils literal notranslate"><span class="pre">RocksDb.WithCachingEnabled()</span></code> or <code class="docutils literal notranslate"><span class="pre">RocksDbWindows.WithCachingEnabled()</span></code></p></li>
</ul>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Enable caching for a rocksdb window store</span>
<span class="n">RocksDbWindows</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;count-window-store&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithKeySerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">StringSerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithValueSerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Int64SerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithCachingEnabled</span><span class="p">();</span>

<span class="c1">// Enable caching for an in-memory window store</span>
<span class="n">InMemoryWindows</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;count-window-store&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithKeySerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">StringSerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithValueSerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Int64SerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithCachingEnabled</span><span class="p">();</span>

<span class="c1">// Enable caching for an rocksdb key/value store</span>
<span class="n">RocksDb</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;count-store&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithKeySerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">StringSerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithValueSerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Int64SerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithCachingEnabled</span><span class="p">();</span>

<span class="c1">// Enable caching for an in-memory key/value store</span>
<span class="n">InMemory</span><span class="p">.</span><span class="n">As</span><span class="o">&lt;</span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">long</span><span class="o">&gt;</span><span class="p">(</span><span class="s">&quot;count-store&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithKeySerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">StringSerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithValueSerdes</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Int64SerDes</span><span class="p">())</span>
<span class="w">        </span><span class="p">.</span><span class="n">WithCachingEnabled</span><span class="p">();</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="stateful-processors.html" class="btn btn-neutral float-left" title="Stateful processors" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="topology-test-driver.html" class="btn btn-neutral float-right" title="Test topology driver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, @LGouellec.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>